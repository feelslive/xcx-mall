<!-- 规格弹窗 -->
<view class="pup-sku" wx:if="{{hideBuy}}">
    <view class="pup-sku-main">
        <view class='pup-sku-header'>
            <image class="pup-sku-img" src="{{defaultSku.pic?defaultSku.pic:pic}}"></image>
            <view class="pup-sku-price" wx-if="{{findSku}}">
                ￥
                <text class="pup-sku-price-int">{{wxs.parsePrice(defaultSku.price)[0]}}</text>
                .{{wxs.parsePrice(defaultSku.price)[1]}}
            </view>
            <view class="pup-sku-price" wx-if="{{!findSku}}">无货</view>
            <view class='pup-sku-prop'>
                <text>已选</text>
                {{selectedProp.length>0?selectedProp+'，':selectedProp}}{{prodNum}}件
            </view>
            <view class='close' bindtap='closePopup'></view>
        </view>
        <view class='pup-sku-body'>
            <view class="pup-sku-area">
                <!-- <view wx:for="{{skuGroup}}"  wx:for-index="key" wx:for-item="value"  wx:key='*this'>
                    {{key}} {{value}}
                </view> -->
                <block wx:for="{{skuGroup}}" wx:for-index="key" wx:for-item="value" wx:key='*this'>
                    <view class='sku-kind'>{{key}}</view>
                    <view class='sku-choose'>
                        <block wx:for="{{value}}" wx:key='*this'>
                            <!-- <text >{{value}}</text> -->
                            <text
                                class="sku-choose-item {{wxs.array_contain(selectedProp,item)?'active':''}} {{['dashed',''][wxs.props_contain(allProperties,selectedPropObj,key,item,propKeys)]}}"
                                bindtap='toChooseItem' data-key="{{key}}" data-val="{{item}}">{{item}}
                            </text>
                        </block>
                    </view>
                </block>
            </view>
            <view class="pup-sku-count">
                <view class="num-wrap">
                    <view class="minus" bindtap='onCountMinus'>
                        <text class="row"></text>
                    </view>
                    <view class="text-wrap">
                        <input type="number" value="{{prodNum}}" disabled />
                    </view>
                    <view class="plus" bindtap='onCountPlus'>
                        <text class="row"></text>
                        <text class="col"></text>
                    </view>
                </view>
                <view class="count-name">数量</view>
            </view>
        </view>
        <view class='pup-sku-footer {{findSku?"":"gray"}}'>
            <view class="btn cart" bindtap='addToCart'>加入购物车</view>
            <view class="btn buy" bindtap='buyNow'>立即购买</view>
        </view>
    </view>
</view>
<wxs module="wxs" src="../../wxs/number.wxs" />